{% extends "./preregistration/preregbase.html" %}
{% block title %}{{ EVENT_NAME }} - At the Door Registration{% endblock %}

{% block content %}

<div class="masthead">
</div>

    <script type="text/javascript">
        var DISABLE_STRIPE_BUTTONS_ON_CLICK = true;
        $(function(){
            $(".focus:first").focus();
            if (DISABLE_STRIPE_BUTTONS_ON_CLICK) {
                $("form.stripe").on("click", "button", function() {
                    $("a > .stripe-button-el").unwrap().attr("disabled", true).unwrap()
                });
            }
        });
    </script>

<span id="message" style="float:left ; color:red">{{ message }}</span> <br/>

<script src="../static/lib/utils/servertimecheck.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        $("#message").css("float", null);
    });
    window.setTimeout(function(){ $("#message").hide(); }, 10000);

    var maybeBold = function() {
        if ($("[name=payment_method]").val() == {{ MANUAL }}) {
            $("#email").css("font-weight", "bold");
        } else {
            $("#email").css("font-weight", "normal");
        }
    };
    $(maybeBold);

    var showOrHide = function() {
        setVisible("#underage", $("[name=age_group]").val() == {{ UNDER_18 }});
        setVisible("#under13", $("[name=age_group]").val() == {{ UNDER_18 }});
    };
    {% if not COLLECT_EXACT_BIRTHDATE %} $(showOrHide); {% endif %}
</script>

<form method="post" action="register" class="form-horizontal" autocomplete="off">
<input type="hidden" name="id" value="{{ attendee.id }}" />

<div class="form-group">
<label for="payment_method" class="col-sm-2 control-label">Payment Method</label>
<div class="col-sm-6">
  <select name="payment_method" class="form-control" onChange="maybeBold()">
      <option value="">Select a payment option</option>
      {% options DOOR_PAYMENT_METHOD_OPTS attendee.payment_method %}
  </select>
</div>
</div>


<div class="form-group">
    <label for="first_name" class="col-sm-2 control-label">First Name</label>
    <div class="col-sm-6">
      <input type="text" name="first_name" id="first_name" value="{{ attendee.first_name }}" class="form-control" placeholder="First Name">
    </div>
  </div>
  <div class="form-group">
    <label for="last_name" class="col-sm-2 control-label">Last Name</label>
    <div class="col-sm-6">
      <input type="text" name="last_name" id="last_name" value="{{ attendee.last_name }}" class="form-control" placeholder="Last Name">
    </div>
  </div>

  <div class="form-group">
  <label for="badge_type" class="col-sm-2 control-label">Badge Type</label>
  <div class="col-sm-6">
    <select name="badge_type" class="form-control">
        {% options AT_THE_DOOR_BADGE_OPTS attendee.badge_type %}
    </select>
  </div>
  </div>

  <div class="form-group" style="display:none;">
  <label for="badge_type" class="col-sm-2 control-label">Backup Phone Name:</label>
  <div class="col-sm-6">
    <input type="text" name="ec_name" value="{{ attendee.ec_name }}" />
  </div>
  </div>
  <div class="form-group" style="display:none;">
  <label for="badge_type" class="col-sm-2 control-label">Backup Phone Number:</label>
  <div class="col-sm-6">
    <input type="text" name="ec_phone" value="{{ attendee.ec_phone }}" />
  </div>
  </div>

  <div class="form-group">
    <label for="email" class="col-sm-2 control-label">Email Address</label>
    <div class="col-sm-6">
      <input type="email" name="email" id="email" value="{{ attendee.email }}" class="form-control" placeholder="Email Address">
    </div>
  </div>

  <div class="form-group">
      <label for="zip_code" class="col-sm-2 control-label">ZIP/Postal Code:</label>
      <div class="col-sm-6">
          <input type="text" name="zip_code" class="form-control" value="{{ attendee.zip_code }}" />
      </div>
  </div>
  <div class="form-group" id="international">
      <div class="checkbox col-sm-6 col-sm-offset-2">
          <label>
              {% checkbox attendee.international %}
              I'm coming from outside the US.
          </label>
      </div>
  </div>
<tr><td>
    {% include "preregistration/extra.html" %}
</td></tr>

<div class="form-group">
<div class="col-sm-6 col-sm-offset-2">
           <button type="submit" class="btn btn-primary" value="Register">Register</button>
   </div>
</div>
</form>
{% endblock %}
